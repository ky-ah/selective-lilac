"""
Naming mappings for shared/task-specific model decomposition

1: task-specific, 0: shared

index                  |    0           1           2           3           4           5
                       |
attention              |    self-attn   ffn1        ffn2        norm1       norm2       ---
film                   |    weight      bias        conv1       conv2       bn1         bn2


e.g., we want to have bias and bn2 in a FiLMed block task-specific,
then the input to the block would be [0, 1, 0, 0, 0, 1]
"""

ATTENTION_SPLIT = {
    "all-shared": [(0, 0, 0, 0, 0), (0, 0, 0, 0, 0), (0, 0, 0, 0, 0), (0, 0, 0, 0, 0)],
    "all-specific": [
        (1, 1, 1, 1, 1),
        (1, 1, 1, 1, 1),
        (1, 1, 1, 1, 1),
        (1, 1, 1, 1, 1),
    ],
    "first-layer": [(1, 1, 1, 1, 1), (0, 0, 0, 0, 0), (0, 0, 0, 0, 0), (0, 0, 0, 0, 0)],
    "second-layer": [
        (0, 0, 0, 0, 0),
        (1, 1, 1, 1, 1),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "third-layer": [(0, 0, 0, 0, 0), (0, 0, 0, 0, 0), (1, 1, 1, 1, 1), (0, 0, 0, 0, 0)],
    "fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (1, 1, 1, 1, 1),
    ],
    "self-attn-all-layers": [
        (1, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
    ],
    "self-attn-first-layer": [
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "self-attn-second-layer": [
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "self-attn-third-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "self-attn-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
    ],
    "self-attn-second-third-fourth-layer": [
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
    ],
    "self-attn-first-second-layer": [
        (1, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "self-attn-third-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
    ],
    "self-attn-second-fourth-layer": [
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
    ],
    "self-attn-first-third-layer": [
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "self-attn-first-fourth-layer": [
        (1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0),
    ],
    "ffn1-ffn2-all-layers": [
        (0, 1, 1, 0, 0),
        (0, 1, 1, 0, 0),
        (0, 1, 1, 0, 0),
        (0, 1, 1, 0, 0),
    ],
    "ffn1-ffn2-first-layer": [
        (0, 1, 1, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn1-ffn2-second-layer": [
        (0, 0, 0, 0, 0),
        (0, 1, 1, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn1-ffn2-third-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 1, 1, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn1-ffn2-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 1, 1, 0, 0),
    ],
    "ffn1-all-layers": [
        (0, 1, 0, 0, 0),
        (0, 1, 0, 0, 0),
        (0, 1, 0, 0, 0),
        (0, 1, 0, 0, 0),
    ],
    "ffn1-first-layer": [
        (0, 1, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn1-second-layer": [
        (0, 0, 0, 0, 0),
        (0, 1, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn1-third-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 1, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn1-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 1, 0, 0, 0),
    ],
    "ffn2-all-layers": [
        (0, 0, 1, 0, 0),
        (0, 0, 1, 0, 0),
        (0, 0, 1, 0, 0),
        (0, 0, 1, 0, 0),
    ],
    "ffn2-first-layer": [
        (0, 0, 1, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn2-second-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 1, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn2-third-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 1, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "ffn2-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 1, 0, 0),
    ],
    "norm1-norm2-all-layers": [
        (0, 0, 0, 1, 1),
        (0, 0, 0, 1, 1),
        (0, 0, 0, 1, 1),
        (0, 0, 0, 1, 1),
    ],
    "norm1-norm2-first-layer": [
        (0, 0, 0, 1, 1),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "norm1-norm2-second-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 1, 1),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "norm1-norm2-third-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 1, 1),
        (0, 0, 0, 0, 0),
    ],
    "norm1-norm2-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 1, 1),
    ],
    "norm1-all-layers": [
        (0, 0, 0, 1, 0),
        (0, 0, 0, 1, 0),
        (0, 0, 0, 1, 0),
        (0, 0, 0, 1, 0),
    ],
    "norm1-first-layer": [
        (0, 0, 0, 1, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "norm1-second-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 1, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "norm1-third-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 1, 0),
        (0, 0, 0, 0, 0),
    ],
    "norm1-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 1, 0),
    ],
    "norm2-all-layers": [
        (0, 0, 0, 0, 1),
        (0, 0, 0, 0, 1),
        (0, 0, 0, 0, 1),
        (0, 0, 0, 0, 1),
    ],
    "norm2-first-layer": [
        (0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "norm2-second-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
    ],
    "norm2-third-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0),
    ],
    "norm2-fourth-layer": [
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1),
    ],
}

FILM_SPLIT = {
    "all-shared": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "all-split": [
        (1, 1, 1, 1, 1, 1),
        (1, 1, 1, 1, 1, 1),
        (1, 1, 1, 1, 1, 1),
        (1, 1, 1, 1, 1, 1),
    ],
    "first-layer": [
        (1, 1, 1, 1, 1, 1),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "second-layer": [
        (0, 0, 0, 0, 0, 0),
        (1, 1, 1, 1, 1, 1),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (1, 1, 1, 1, 1, 1),
        (0, 0, 0, 0, 0, 0),
    ],
    "fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (1, 1, 1, 1, 1, 1),
    ],
    "weight-bias-all-layers": [
        (1, 1, 0, 0, 0, 0),
        (1, 1, 0, 0, 0, 0),
        (1, 1, 0, 0, 0, 0),
        (1, 1, 0, 0, 0, 0),
    ],
    "weight-bias-first-layer": [
        (1, 1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "weight-bias-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (1, 1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "weight-bias-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (1, 1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "weight-bias-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (1, 1, 0, 0, 0, 0),
    ],
    "weight-all-layers": [
        (1, 0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0, 0),
    ],
    "weight-first-layer": [
        (1, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "weight-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "weight-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "weight-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (1, 0, 0, 0, 0, 0),
    ],
    "bias-all-layers": [
        (0, 1, 0, 0, 0, 0),
        (0, 1, 0, 0, 0, 0),
        (0, 1, 0, 0, 0, 0),
        (0, 1, 0, 0, 0, 0),
    ],
    "bias-first-layer": [
        (0, 1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bias-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bias-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 1, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bias-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 1, 0, 0, 0, 0),
    ],
    "conv1-conv2-all-layers": [
        (0, 0, 1, 1, 0, 0),
        (0, 0, 1, 1, 0, 0),
        (0, 0, 1, 1, 0, 0),
        (0, 0, 1, 1, 0, 0),
    ],
    "conv1-conv2-first-layer": [
        (0, 0, 1, 1, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv1-conv2-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 1, 1, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv1-conv2-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 1, 1, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv1-conv2-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 1, 1, 0, 0),
    ],
    "conv1-all-layers": [
        (0, 0, 1, 0, 0, 0),
        (0, 0, 1, 0, 0, 0),
        (0, 0, 1, 0, 0, 0),
        (0, 0, 1, 0, 0, 0),
    ],
    "conv1-first-layer": [
        (0, 0, 1, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv1-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 1, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv1-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 1, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv1-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 1, 0, 0, 0),
    ],
    "conv2-all-layers": [
        (0, 0, 0, 1, 0, 0),
        (0, 0, 0, 1, 0, 0),
        (0, 0, 0, 1, 0, 0),
        (0, 0, 0, 1, 0, 0),
    ],
    "conv2-first-layer": [
        (0, 0, 0, 1, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv2-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 1, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv2-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 1, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "conv2-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 1, 0, 0),
    ],
    "conv1-first-conv2-fourth-layer": [
        (0, 0, 1, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 1, 0, 0),
    ],
    "bn1-bn2-all-layers": [
        (0, 0, 0, 0, 1, 1),
        (0, 0, 0, 0, 1, 1),
        (0, 0, 0, 0, 1, 1),
        (0, 0, 0, 0, 1, 1),
    ],
    "bn1-bn2-first-layer": [
        (0, 0, 0, 0, 1, 1),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn1-bn2-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1, 1),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn1-bn2-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1, 1),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn1-bn2-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1, 1),
    ],
    "bn1-all-layers": [
        (0, 0, 0, 0, 1, 0),
        (0, 0, 0, 0, 1, 0),
        (0, 0, 0, 0, 1, 0),
        (0, 0, 0, 0, 1, 0),
    ],
    "bn1-first-layer": [
        (0, 0, 0, 0, 1, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn1-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn1-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn1-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 1, 0),
    ],
    "bn2-all-layers": [
        (0, 0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0, 1),
    ],
    "bn2-first-layer": [
        (0, 0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn2-second-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn2-third-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 1),
        (0, 0, 0, 0, 0, 0),
    ],
    "bn2-fourth-layer": [
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 0),
        (0, 0, 0, 0, 0, 1),
    ],
}
